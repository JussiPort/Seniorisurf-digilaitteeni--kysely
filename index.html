<!doctype html>
<html lang="fi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Seniorisurf â€“ Minun digilaitteeni</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    html { scroll-behavior: smooth; }
    body.dark { background-color: #0f172a; color: #e2e8f0; }
    details[open] summary .chev { transform: rotate(90deg); }
  </style>
</head>
<body class="bg-slate-50 text-slate-900 transition-colors">
  <main id="app" class="max-w-4xl mx-auto p-4 sm:p-6"></main>

  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;

    /* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
       Kielitekstit â€“ FI / SV / EN
    â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
    const LANGS = {
      fi: {
        title: "Seniorisurf â€“ Minun digilaitteeni",
        subtitle: "Opintopiiri 2025 Â· TyÃ¶ryhmÃ¤ 1",
        introTitle: "Tervetuloa Seniorisurf-kyselyyn!",
        introBody: `KyselyssÃ¤ kartoitetaan:
â€¢ miksi olet hankkimassa laitetta,
â€¢ miten ja missÃ¤ kÃ¤ytÃ¤t digilaitteita,
â€¢ millaisia ominaisuuksia arvostat,
â€¢ ja mistÃ¤ voisit saada tukea ja neuvontaa hankinnan jÃ¤lkeen.
Lopuksi saat yhteenvedon ja henkilÃ¶kohtaisen suosituksen sekÃ¤ linkkejÃ¤ oman paikkakuntasi ja verkon digiopastukseen.`,
        theme: "Tumma / Vaalea tila",
        bigText: "Aâ€“A isompi teksti",
        print: "Tulosta / PDF",
        lang: "Kieli",
        clear: "TyhjennÃ¤ lomake",
        copy: "Kopioi yhteenveto",
        export: "Vie CSV",
        boxes: [
          "ðŸ§© 1 â€“ Miksi olet hankkimassa laitetta?",
          "ðŸ’¡ 2 â€“ Nykyiset laitteet ja oma osaaminen",
          "ðŸŽ¨ 3 â€“ Mieltymykset (liikkuvuus ja nÃ¤yttÃ¶)",
          "ðŸ’¶ 4 â€“ Budjetti ja erityistarpeet",
          "ðŸ“ 5 â€“ Asuinpaikka ja digituki",
          "ðŸŸ© 6 â€“ Yhteenveto ja hakulinkit"
        ],
        tips: {
          why: "ðŸ’¡ Kirjaa, mitÃ¤ haluat parantaa tai helpottaa.",
          level: "ðŸ’¡ HelppokÃ¤yttÃ¶isyys on tÃ¤rkein aloittelijalle; tehokkuus aktiivikÃ¤yttÃ¤jÃ¤lle.",
          prefs: "ðŸ’¡ Iso, selkeÃ¤ nÃ¤yttÃ¶ sopii kotikÃ¤yttÃ¶Ã¶n. Liikkuvalle kevyt laite on kÃ¤tevÃ¤.",
          budget: "ðŸ’¡ Valitse budjetti ja vain tÃ¤rkeimmÃ¤t ominaisuudet.",
          support: "ðŸ’¡ Digiopastusta lÃ¶ytyy kirjastosta ja jÃ¤rjestÃ¶istÃ¤ (esim. SeniorSurf, Enter ry).",
          summary: "ðŸ’¡ Alla olevista painikkeista etsit ajantasaiset tuotteet ja hinnat eri kaupoista."
        },
        whyOpts: [
          'Nykyinen laite on vanha tai hidas',
          'Tarvitsen laitteen tyÃ¶skentelyyn tai opiskeluun',
          'Haluan helpottaa asioiden hoitamista verkossa',
          'Haluan pysyÃ¤ yhteydessÃ¤ lÃ¤heisiin',
          'Haluaisin oppia uutta ja pysyÃ¤ ajan tasalla',
          'Haluaisin aloittaa uuden harrastuksen',
          'Muu syy'
        ],
        haveOpts: ['Ei vielÃ¤ lainkaan','Ã„lypuhelin','Tabletti','Kannettava tietokone','PÃ¶ytÃ¤kone','Ã„lykello tai muu mobiililaite'],
        levelOpts: ['Aloittelija','PeruskÃ¤yttÃ¤jÃ¤','Kokenut'],
        useOpts: ['Omien asioiden hoitaminen','Tiedon hakeminen','Viihde','Pelaaminen','Luova tyÃ¶','Verkkokurssit ja etÃ¤luennot','Yhteydenpito'],
        mobilityOpts: ['KÃ¤ytÃ¤n laitetta pÃ¤Ã¤asiassa kotona','Otan laitteen joskus mukaan','Tarvitsen kevyen ja helposti mukana kulkevan laitteen'],
        screenOpts: ['Iso ja selkeÃ¤ nÃ¤yttÃ¶ (helppo nÃ¤hdÃ¤ ja kÃ¤yttÃ¤Ã¤)','Kevyt ja kompakti koko (helppo kuljettaa)'],
        budgetOpts: ['Alle 500 â‚¬','500â€“1000 â‚¬','Yli 1000 â‚¬'],
        needOpts: ['HyvÃ¤ kamera','KynÃ¤tuki','PitkÃ¤ akun kesto','Suuri tallennustila','Pelaamiseen sopiva teho','Suuri ja kirkas nÃ¤yttÃ¶','Kevyt ja helposti mukana kulkeva','Fyysinen nÃ¤ppÃ¤imistÃ¶','EsteettÃ¶myysominaisuudet (Ã¤Ã¤niavustus, suurennus, kontrasti)'],
        labels: {
          freeText: 'Kuvaile omin sanoin (valinnainen)',
          place: 'Asuinpaikka (kaupunki/kunta)',
          supportQ: 'HyÃ¶dynnÃ¤tkÃ¶ digitukea tarvittaessa?',
          yes: 'KyllÃ¤', maybe: 'EhkÃ¤', no: 'En',
          searchTitle: 'ðŸ” Hae verkosta (avautuu uuteen vÃ¤lilehteen)',
          adviceTitle: 'ðŸ’¡ Suositeltu laitetyyppi',
          altAdvice: 'Vaihtoehtoinen tyyppi',
          yourAnswers: 'ðŸ§¾ Yhteenveto vastauksistasi'
        },
        shops: {
          gigantti: 'Hae Gigantista',
          verkkis: 'Hae Verkkokauppa.comista',
          power: 'Hae Powerista',
          dna: 'Hae DNA:lta',
          elisa: 'Hae Elisalta',
          hintaopas: 'Hae Hintaoppaasta'
        },
        footer: 'Â© Seniorisurf opintopiiri 2025 Â· Ei kerÃ¤Ã¤ henkilÃ¶tietoja Â· Vastaukset tallennetaan selaimeen'
      },
      sv: {
        title: 'Seniorisurf â€“ Min digitala enhet',
        subtitle: 'Studiecirkel 2025',
        introTitle: 'VÃ¤lkommen till SeniorSurf-enkÃ¤ten!',
        introBody: 'EnkÃ¤ten kartlÃ¤gger behov, anvÃ¤ndning, preferenser och stÃ¶d. I slutet fÃ¥r du en sammanfattning och sÃ¶klÃ¤nkar.',
        theme: 'MÃ¶rkt / Ljust lÃ¤ge', bigText: 'Aâ€“A stÃ¶rre text', print: 'Skriv ut / PDF', lang: 'SprÃ¥k', clear: 'TÃ¶m formulÃ¤ret', copy:'Kopiera sammanfattning', export:'Exportera CSV',
        boxes: ['ðŸ§© 1 â€“ VarfÃ¶r skaffar du en enhet?','ðŸ’¡ 2 â€“ Nuvarande enheter & kunskap','ðŸŽ¨ 3 â€“ Preferenser (rÃ¶rlighet & skÃ¤rm)','ðŸ’¶ 4 â€“ Budget & behov','ðŸ“ 5 â€“ Ort & stÃ¶d','ðŸŸ© 6 â€“ Sammanfattning & lÃ¤nkar'],
        tips: { why:'ðŸ’¡ Skriv vad du vill fÃ¶rbÃ¤ttra.', level:'ðŸ’¡ Enkelhet hjÃ¤lper nybÃ¶rjare mest.', prefs:'ðŸ’¡ Stor skÃ¤rm passar hemmabruk.', budget:'ðŸ’¡ VÃ¤lj budget och bara det viktigaste.', support:'ðŸ’¡ Bibliotek erbjuder ofta digital handledning.', summary:'ðŸ’¡ AnvÃ¤nd knapparna fÃ¶r att sÃ¶ka i butikerna.' },
        haveOpts:['Inga Ã¤nnu','Smarttelefon','Surfplatta','BÃ¤rbar dator','StationÃ¤r dator','Smartklocka'],
        levelOpts:['NybÃ¶rjare','GrundlÃ¤ggande','Erfaren'],
        useOpts:['Egen Ã¤rendehantering','InformationssÃ¶kning','UnderhÃ¥llning','Spel','Kreativt arbete','NÃ¤tkurser','Kontakt'],
        mobilityOpts:['Mest hemma','Ibland med','BehÃ¶ver lÃ¤tt att bÃ¤ra'],
        screenOpts:['Stor och tydlig skÃ¤rm','Liten och lÃ¤tt'],
        budgetOpts:['Under 500 â‚¬','500â€“1000 â‚¬','Ã–ver 1000 â‚¬'],
        needOpts:['Bra kamera','PennstÃ¶d','LÃ¥ng batteritid','Stor lagring','Spelkraft','Stor och ljus skÃ¤rm','LÃ¤tt att bÃ¤ra','Fysiskt tangentbord','TillgÃ¤nglighetsfunktioner'],
        labels:{ freeText:'Beskriv med egna ord', place:'Ort (stad/kommun)', supportQ:'Vill du anvÃ¤nda digitalt stÃ¶d?', yes:'Ja', maybe:'Kanske', no:'Nej', searchTitle:'ðŸ” Ã–ppna sÃ¶klÃ¤nkar', adviceTitle:'ðŸ’¡ Rekommenderad typ', altAdvice:'Alternativ typ', yourAnswers:'ðŸ§¾ Sammanfattning' },
        shops:{ gigantti:'SÃ¶k pÃ¥ Gigantti', verkkis:'SÃ¶k pÃ¥ Verkkokauppa.com', power:'SÃ¶k pÃ¥ Power', dna:'SÃ¶k pÃ¥ DNA', elisa:'SÃ¶k pÃ¥ Elisa', hintaopas:'SÃ¶k pÃ¥ Hintaopas' },
        footer:'Â© Seniorisurf 2025'
      },
      en: {
        title: 'Senior Surf â€“ My digital device',
        subtitle: 'Study Circle 2025',
        introTitle: 'Welcome to the SeniorSurf survey!',
        introBody: 'We map your needs, usage, preferences and support options. Youâ€™ll get a summary and search links to shops.',
        theme:'Dark / Light mode', bigText:'Aâ€“A larger text', print:'Print / PDF', lang:'Language', clear:'Reset form', copy:'Copy summary', export:'Export CSV',
        boxes:['ðŸ§© 1 â€“ Why a new device?','ðŸ’¡ 2 â€“ Current devices & skills','ðŸŽ¨ 3 â€“ Preferences (mobility & screen)','ðŸ’¶ 4 â€“ Budget & needs','ðŸ“ 5 â€“ Location & support','ðŸŸ© 6 â€“ Summary & links'],
        tips:{ why:'ðŸ’¡ Note what you want to improve.', level:'ðŸ’¡ Simplicity helps beginners most.', prefs:'ðŸ’¡ Big screen suits home use.', budget:'ðŸ’¡ Choose a budget; keep only essentials.', support:'ðŸ’¡ Libraries often offer free digital help.', summary:'ðŸ’¡ Use the buttons to search shops.' },
        haveOpts:['None yet','Smartphone','Tablet','Laptop','Desktop','Smartwatch'],
        levelOpts:['Beginner','Intermediate','Advanced'],
        useOpts:['E-services','Information search','Entertainment','Gaming','Creative work','Online courses','Keeping in touch'],
        mobilityOpts:['Mainly at home','Sometimes with me','Need lightweight portable'],
        screenOpts:['Large & clear screen','Compact & light'],
        budgetOpts:['Under â‚¬500','â‚¬500â€“â‚¬1000','Over â‚¬1000'],
        needOpts:['Good camera','Pen support','Long battery life','Large storage','Gaming capable','Large bright display','Lightweight portable','Physical keyboard','Accessibility features'],
        labels:{ freeText:'Describe in your own words', place:'City / municipality', supportQ:'Would you use digital support?', yes:'Yes', maybe:'Maybe', no:'No', searchTitle:'ðŸ” Open search links', adviceTitle:'ðŸ’¡ Recommended type', altAdvice:'Alternative type', yourAnswers:'ðŸ§¾ Your summary' },
        shops:{ gigantti:'Search Gigantti', verkkis:'Search Verkkokauppa.com', power:'Search Power', dna:'Search DNA', elisa:'Search Elisa', hintaopas:'Search Hintaopas' },
        footer:'Â© Senior Surf 2025'
      }
    };

    /* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
       Apurit
    â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
    const load = (k, d) => { try { return JSON.parse(localStorage.getItem(k)) ?? d; } catch { return d; } };
    const save = (k, v) => { try { localStorage.setItem(k, JSON.stringify(v)); } catch {} };

    function Section({ title, tip, children }){
      return (
        <details open className="mb-3 border border-slate-300 dark:border-slate-700 rounded-2xl">
          <summary className="cursor-pointer p-4 font-semibold bg-white dark:bg-slate-800">{title}</summary>
          <div className="p-4 bg-slate-50 dark:bg-slate-900 space-y-3">
            {children}
            {tip && <p className="text-sm text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 rounded-lg p-2">{tip}</p>}
          </div>
        </details>
      );
    }

    function Chip({label,active,onClick}){
      return <button onClick={onClick} className={`px-3 py-1 rounded-full border ${active? 'bg-emerald-100 border-emerald-300 dark:bg-emerald-900/30 dark:border-emerald-700':'bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600'}`}>{label}</button>;
    }

    /* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
       Sovellus
    â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
    function App(){
      const [lang,setLang] = useState(load('ss-lang','fi'));
      const t = LANGS[lang];
      const [dark,setDark] = useState(load('ss-dark',false));
      const [large,setLarge] = useState(load('ss-large',false));
      const [f,setF] = useState(load('ss-form', {
        why:[], whyFree:'', have:[], level:'', use:[], mobility:'', screen:'', budget:'', needs:[], place:'', support:''
      }));

      useEffect(()=> save('ss-lang',lang),[lang]);
      useEffect(()=> { document.body.classList.toggle('dark', dark); save('ss-dark',dark); },[dark]);
      useEffect(()=> { document.documentElement.style.fontSize = large? '18px':'16px'; save('ss-large',large); },[large]);
      useEffect(()=> save('ss-form',f),[f]);

      const toggle = (key, value) => setF(prev=>{
        const set = new Set(prev[key]);
        set.has(value) ? set.delete(value) : set.add(value);
        return {...prev, [key]: Array.from(set)};
      });

      const resetAll = () => {
        localStorage.removeItem('ss-form');
        setF({ why:[], whyFree:'', have:[], level:'', use:[], mobility:'', screen:'', budget:'', needs:[], place:'', support:'' });
      };

      // â€”â€”â€” Suositus: pisteytÃ¤ laitetyypit ja anna myÃ¶s vaihtoehto
      const scoring = useMemo(()=>{
        const types = ['tabletti','kannettava','pÃ¶ytÃ¤kone','Ã¤lypuhelin'];
        const score = Object.fromEntries(types.map(t=>[t,0]));

        // KÃ¤yttÃ¶tarkoitus
        f.use.includes('Luova tyÃ¶') && (score.kannettava+=3);
        f.use.includes('Verkkokurssit ja etÃ¤luennot') && (score.kannettava+=3);
        f.use.includes('Omien asioiden hoitaminen') && (score.tabletti+=2);
        f.use.includes('Tiedon hakeminen') && (score.tabletti+=2);
        f.use.includes('Yhteydenpito') && (score.Ã¤lypuhelin+=3);
        f.use.includes('Pelaaminen') && (score.kannettava+=2);

        // Liikkuvuus & nÃ¤yttÃ¶
        if (f.mobility==='KÃ¤ytÃ¤n laitetta pÃ¤Ã¤asiassa kotona') score.pÃ¶ytÃ¤kone+=3;
        if (f.mobility==='Tarvitsen kevyen ja helposti mukana kulkevan laitteen') score.Ã¤lypuhelin+=3, score.tabletti+=2, score.kannettava+=1;
        if (f.screen==='Iso ja selkeÃ¤ nÃ¤yttÃ¶ (helppo nÃ¤hdÃ¤ ja kÃ¤yttÃ¤Ã¤)') score.pÃ¶ytÃ¤kone+=2, score.tabletti+=2, score.kannettava+=1;
        if (f.screen==='Kevyt ja kompakti koko (helppo kuljettaa)') score.Ã¤lypuhelin+=2, score.tabletti+=1;

        // Kokemustaso
        if (f.level==='Aloittelija') score.tabletti+=3, score.Ã¤lypuhelin+=1;
        if (f.level==='PeruskÃ¤yttÃ¤jÃ¤') score.tabletti+=1, score.kannettava+=1;
        if (f.level==='Kokenut') score.kannettava+=2, score.pÃ¶ytÃ¤kone+=1;

        // Budjetti (suuntaa-antava)
        if (f.budget==='Alle 500 â‚¬') score.tabletti+=1, score.Ã¤lypuhelin+=1;
        if (f.budget==='500â€“1000 â‚¬') score.kannettava+=1, score.tabletti+=1;
        if (f.budget==='Yli 1000 â‚¬') score.kannettava+=2, score.pÃ¶ytÃ¤kone+=2;

        // Erityistarpeet
        f.needs.includes('Fyysinen nÃ¤ppÃ¤imistÃ¶') && (score.kannettava+=2, score.pÃ¶ytÃ¤kone+=2);
        f.needs.includes('EsteettÃ¶myysominaisuudet (Ã¤Ã¤niavustus, suurennus, kontrasti)') && (score.tabletti+=1, score.Ã¤lypuhelin+=1);
        f.needs.includes('PitkÃ¤ akun kesto') && (score.tabletti+=1, score.Ã¤lypuhelin+=1);
        f.needs.includes('Suuri ja kirkas nÃ¤yttÃ¶') && (score.pÃ¶ytÃ¤kone+=2, score.tabletti+=2);
        f.needs.includes('KynÃ¤tuki') && (score.tabletti+=2);

        const sorted = Object.entries(score).sort((a,b)=>b[1]-a[1]);
        const best = sorted[0][0];
        const alt = sorted[1] && (sorted[1][1] >= sorted[0][1]-1) ? sorted[1][0] : null; // vaihtoehto lÃ¤hellÃ¤
        return {score, best, alt};
      }, [f]);

      const queryForType = (type) => {
        let q = type;
        if (f.budget==='Alle 500 â‚¬') q += ' alle 500 â‚¬';
        if (f.budget==='500â€“1000 â‚¬') q += ' 500â€“1000 â‚¬';
        if (f.needs.includes('Suuri ja kirkas nÃ¤yttÃ¶')) q += ' iso nÃ¤yttÃ¶';
        if (f.needs.includes('Fyysinen nÃ¤ppÃ¤imistÃ¶')) q += ' nÃ¤ppÃ¤imistÃ¶';
        return q;
      };

      const urlsBest = useMemo(()=>buildSearchUrls(queryForType(scoring.best)),[scoring.best, f.budget, f.needs]);
      const urlsAlt  = useMemo(()=> scoring.alt ? buildSearchUrls(queryForType(scoring.alt)) : null,[scoring.alt, f.budget, f.needs]);

      const copySummary = () => {
        const txt = [
          'Yhteenveto â€“ Minun digilaitteeni',
          '',
          `Hankintasyyt: ${f.why.join(', ') || '-'}`,
          `Vapaa kuvaus: ${f.whyFree || '-'}`,
          `Nykyiset laitteet: ${f.have.join(', ') || '-'}`,
          `KÃ¤yttÃ¶tarkoitus: ${f.use.join(', ') || '-'}`,
          `Liikkuvuus: ${f.mobility || '-'}`,
          `NÃ¤yttÃ¶: ${f.screen || '-'}`,
          `KÃ¤yttÃ¤jÃ¤kokemus: ${f.level || '-'}`,
          `Budjetti: ${f.budget || '-'}`,
          `Erityistarpeet: ${f.needs.join(', ') || '-'}`,
          `Asuinpaikka: ${f.place || '-'}`,
          `Digituki: ${f.support || '-'}`,
          '',
          `Suositeltu tyyppi: ${scoring.best}${scoring.alt ? ` (vaihtoehto: ${scoring.alt})` : ''}`
        ].join('
');
        navigator.clipboard.writeText(txt).then(()=> alert('Yhteenveto kopioitu.'));
      };

      const exportCSV = () => {
        const rows = [
          ['Hankintasyyt', f.why.join(', ')],
          ['Vapaa kuvaus', f.whyFree],
          ['Nykyiset laitteet', f.have.join(', ')],
          ['KÃ¤yttÃ¶tarkoitus', f.use.join(', ')],
          ['Liikkuvuus', f.mobility],
          ['NÃ¤yttÃ¶', f.screen],
          ['KÃ¤yttÃ¤jÃ¤kokemus', f.level],
          ['Budjetti', f.budget],
          ['Erityistarpeet', f.needs.join(', ')],
          ['Asuinpaikka', f.place],
          ['Digituki', f.support],
          ['Suositeltu tyyppi', scoring.best],
          ['Vaihtoehto', scoring.alt || '']
        ];
        const csv = 'KenttÃ¤;Vastaus
' + rows.map(r=> r.map(v=>`"${(v||'').toString().replaceAll('"','""')}"`).join(';')).join('
');
        const blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a'); a.href=url; a.download='seniorisurf_kysely.csv'; a.click();
      };

      return (
        <div>
          {/* YlÃ¤tunniste + tyÃ¶kalut */}
          <header className="mb-6">
            <div className="flex flex-col sm:flex-row justify-between items-center gap-3">
              <div>
                <h1 className="text-2xl font-bold">{t.title}</h1>
                <p>{t.subtitle}</p>
              </div>
              <div className="flex gap-2 items-center flex-wrap">
                <button onClick={()=>setDark(v=>!v)} className="border px-3 py-1 rounded">{t.theme}</button>
                <button onClick={()=>setLarge(v=>!v)} className="border px-3 py-1 rounded">{t.bigText}</button>
                <button onClick={()=>window.print()} className="border px-3 py-1 rounded">{t.print || 'Tulosta / PDF'}</button>
                <label>{t.lang}:</label>
                <select value={lang} onChange={e=>setLang(e.target.value)} className="border rounded px-2 py-1">
                  <option value="fi">FI</option><option value="sv">SV</option><option value="en">EN</option>
                </select>
                <button onClick={resetAll} className="border px-3 py-1 rounded">{t.clear}</button>
              </div>
            </div>
            <div className="mt-4 p-4 rounded-2xl border bg-white dark:bg-slate-800">
              <h2 className="font-semibold text-lg">{t.introTitle}</h2>
              <p className="mt-2 text-slate-700 dark:text-slate-300 whitespace-pre-line">{t.introBody}</p>
            </div>
          </header>

          {/* 1 â€“ Miksi */}
          <Section title={t.boxes[0]} tip={t.tips.why}>
            <div className="flex flex-wrap gap-2">
              {t.whyOpts.map(opt => (
                <Chip key={opt} label={opt} active={f.why.includes(opt)} onClick={()=>toggle('why', opt)} />
              ))}
            </div>
            <label className="block text-sm mt-2">{t.labels.freeText}</label>
            <textarea value={f.whyFree} onChange={e=>setF({...f, whyFree:e.target.value})} className="w-full p-3 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800" rows="3" />
          </Section>

          {/* 2 â€“ Nykyiset & osaaminen */}
          <Section title={t.boxes[1]} tip={t.tips.level}>
            <p className="font-medium">Laitteet</p>
            <div className="flex flex-wrap gap-2 mb-2">
              {t.haveOpts.map(opt => (
                <Chip key={opt} label={opt} active={f.have.includes(opt)} onClick={()=>toggle('have', opt)} />
              ))}
            </div>
            <p className="font-medium mt-2">Osaamistaso</p>
            <div className="flex flex-wrap gap-2">
              {t.levelOpts.map(opt => (
                <Chip key={opt} label={opt} active={f.level===opt} onClick={()=>setF({...f, level: f.level===opt? '':opt})} />
              ))}
            </div>
            <p className="font-medium mt-2">KÃ¤yttÃ¶tarkoitus</p>
            <div className="flex flex-wrap gap-2">
              {t.useOpts.map(opt => (
                <Chip key={opt} label={opt} active={f.use.includes(opt)} onClick={()=>toggle('use', opt)} />
              ))}
            </div>
          </Section>

          {/* 3 â€“ Mieltymykset */}
          <Section title={t.boxes[2]} tip={t.tips.prefs}>
            <p className="font-medium">Liikkuvuus</p>
            <div className="flex flex-wrap gap-2 mb-2">
              {t.mobilityOpts.map(opt => (
                <Chip key={opt} label={opt} active={f.mobility===opt} onClick={()=>setF({...f, mobility: f.mobility===opt? '':opt})} />
              ))}
            </div>
            <p className="font-medium">NÃ¤yttÃ¶ / koko</p>
            <div className="flex flex-wrap gap-2">
              {t.screenOpts.map(opt => (
                <Chip key={opt} label={opt} active={f.screen===opt} onClick={()=>setF({...f, screen: f.screen===opt? '':opt})} />
              ))}
            </div>
          </Section>

          {/* 4 â€“ Budjetti & tarpeet */}
          <Section title={t.boxes[3]} tip={t.tips.budget}>
            <p className="font-medium">Budjetti</p>
            <div className="flex flex-wrap gap-2 mb-2">
              {t.budgetOpts.map(opt => (
                <Chip key={opt} label={opt} active={f.budget===opt} onClick={()=>setF({...f, budget: f.budget===opt? '':opt})} />
              ))}
            </div>
            <p className="font-medium">Erityistarpeet</p>
            <div className="flex flex-wrap gap-2">
              {t.needOpts.map(opt => (
                <Chip key={opt} label={opt} active={f.needs.includes(opt)} onClick={()=>toggle('needs', opt)} />
              ))}
            </div>
          </Section>

          {/* 5 â€“ Asuinpaikka & digituki */}
          <Section title={t.boxes[4]} tip={t.tips.support}>
            <label className="block text-sm">{t.labels.place}</label>
            <input value={f.place} onChange={e=>setF({...f, place:e.target.value})} className="w-full p-3 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800" />
            <p className="font-medium mt-2">{t.labels.supportQ}</p>
            <div className="flex flex-wrap gap-2">
              {[t.labels.yes, t.labels.maybe, t.labels.no].map(opt => (
                <Chip key={opt} label={opt} active={f.support===opt} onClick={()=>setF({...f, support: f.support===opt? '':opt})} />
              ))}
            </div>
          </Section>

          {/* 6 â€“ Yhteenveto & hakulinkit */}
          <Section title={t.boxes[5]} tip={t.tips.summary}>
            <div className="grid md:grid-cols-2 gap-4">
              <div className="bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl p-3">
                <h3 className="font-semibold mb-2">{t.labels.yourAnswers}</h3>
                <ul className="text-sm space-y-1">
                  <li><b>Hankintasyyt:</b> {f.why.join(', ') || 'â€“'}</li>
                  <li><b>Vapaa kuvaus:</b> {f.whyFree || 'â€“'}</li>
                  <li><b>Laitteet:</b> {f.have.join(', ') || 'â€“'}</li>
                  <li><b>KÃ¤yttÃ¶tarkoitus:</b> {f.use.join(', ') || 'â€“'}</li>
                  <li><b>Liikkuvuus:</b> {f.mobility || 'â€“'}</li>
                  <li><b>NÃ¤yttÃ¶:</b> {f.screen || 'â€“'}</li>
                  <li><b>Osaamistaso:</b> {f.level || 'â€“'}</li>
                  <li><b>Budjetti:</b> {f.budget || 'â€“'}</li>
                  <li><b>Erityistarpeet:</b> {f.needs.join(', ') || 'â€“'}</li>
                  <li><b>Asuinpaikka:</b> {f.place || 'â€“'}</li>
                  <li><b>Digituki:</b> {f.support || 'â€“'}</li>
                </ul>
                <div className="flex flex-wrap gap-2 mt-3">
                  <button className="border px-3 py-1.5 rounded" onClick={copySummary}>{t.copy}</button>
                  <button className="border px-3 py-1.5 rounded" onClick={exportCSV}>{t.export}</button>
                </div>
              </div>

              <div className="bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl p-3">
                <h3 className="font-semibold mb-1">{t.labels.adviceTitle}</h3>
                <p><b>{scoring.best}</b>{scoring.alt ? <span> Â· {t.labels.altAdvice}: <b>{scoring.alt}</b></span> : null}</p>

                <h4 className="font-semibold mt-3">{t.labels.searchTitle}</h4>
                <div className="grid sm:grid-cols-2 gap-2 mt-2">
                  {Object.entries(urlsBest).map(([k,u]) => (
                    <a key={'best-'+k} href={u} target="_blank" rel="noreferrer" className="text-center border rounded-lg px-3 py-2 bg-slate-50 dark:bg-slate-700 hover:bg-slate-100">{t.shops[k]} ({scoring.best})</a>
                  ))}
                  {urlsAlt && Object.entries(urlsAlt).map(([k,u]) => (
                    <a key={'alt-'+k} href={u} target="_blank" rel="noreferrer" className="text-center border rounded-lg px-3 py-2 bg-slate-50 dark:bg-slate-700 hover:bg-slate-100">{t.shops[k]} ({scoring.alt})</a>
                  ))}
                </div>
              </div>
            </div>
          </Section>

          <footer className="text-xs text-slate-500 mt-6">{t.footer}</footer>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('app')).render(<App/>);
  </script>
</body>
</html>
